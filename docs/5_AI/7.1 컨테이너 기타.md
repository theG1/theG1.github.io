---
layout: default
title: 컨테이너 기타
nav_order: 7.1
parent: AI
---
※ 참고 명령어입니다. 교육에 활용하지 않습니다.

### 5) 멀티아키텍처 빌드(선택)

Apple Silicon 등에서 다른 아키텍처용 이미지를 빌드해야 하면 buildx 사용

```bash
docker buildx create --use --name multi
# linux/amd64 와 linux/arm64 둘 다 빌드 예시
DOCKER_BUILDKIT=1 docker buildx build \\
  --platform linux/amd64,linux/arm64 \\
  -t your-dockerhub/my-streamlit:latest \\
  --push .
```

### 6) 레지스트리에 푸시

```bash
# 태그 붙이기
docker tag my-streamlit:latest your-dockerhub/my-streamlit:latest
# 로그인 후 푸시
docker login
docker push your-dockerhub/my-streamlit:latest
```

### 7) Docker Compose 예시(선택)

`compose.yaml` 파일을 만들면 실행이 간단해집니다.

```yaml
services:
  app:
    image: my-streamlit:latest
    build: .
    ports:
      - "8501:8501"
    environment:
      GEMMA_API_KEY: ${GEMMA_API_KEY}
    restart: unless-stopped
```

실행과 중지는 아래처럼

```bash
docker compose up -d
docker compose logs -f
docker compose down
```

### 8) 자주 겪는 에러 해결

- pip install 단계에서 타임아웃: Dockerfile에 `--default-timeout=100` 옵션을 주거나 네트워크 점검
- 포트 미오픈: 컨테이너 로그 `docker logs my-streamlit` 확인. `--server.address=0.0.0.0` 여부 확인
- 파일 경로 에러: Dockerfile의 `COPY` 경로와 실제 파일명 일치 확인. 현재 예시는 [`abcd.py`](http://abcd.py) 기준
- 캐시 이슈: `--no-cache` 옵션으로 빌드 시도 `docker build --no-cache -t my-streamlit:latest .`